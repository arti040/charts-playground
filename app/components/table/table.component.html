<div *ngIf="data">
  <h4 *ngIf="data.title">{{data.title}}</h4>
  <ngx-datatable
    [rows]="data.rows"
    [columns]="data.columns"
    [scrollbarV]="data.opts.scrollable"
  >

    <ngx-datatable-column 
      *ngFor="let item of data.columns; let idx = index" 
      name="{{item.name}}"      
      [width]="item.col_width || config.table.column.width.default"
      [sortable]="item.col_sortable || false"
      [frozenLeft]="item.frozen"
    >
      <!-- ngx header template -->
      <ng-template let-column="column" ngx-datatable-header-template>
        <!-- This is a hack. Ngx-datable still has grouped columns feature -->
        <div *ngIf="item.group" class="table__column-group-wrapper text--center">
          <div       
            class="table__column-group" 
            [style.width]="column.width + data.columns[idx+1].col_width - 4 + 'px'"
          >
            {{item.group}}
          </div>

          <div class="table__cell">
            <div>{{item.label}}</div>
          </div>
        </div>
        <!-- no grouped columns -->
        <div *ngIf="!item.group" class="table__cell {{ item.centered ? 'table__cell--centered' : '' }}">
          <div>{{item.label}}</div>
        </div>
      </ng-template>

      <!-- ngx row template -->
      <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
        <div 
          [ngClass]="{ 'table__cell--marked': value.marked }"
          class="
            table__cell 
            {{ value.padding ? 'padding-left--large' : '' }}
            {{ value.centered ? 'table__cell--centered' : '' }}
            {{ value.color ? 'color-' + value.color : '' }} 
            {{ value.bgColor ? 'bg-color-' + value.bgColor : '' }}" 
        >
          <div *ngIf="value.marked" class="mark-triangle"></div>
          <i *ngIf="value.icon" class="material-icons" [style.color]="value.iconColor" [style.fontSize]="value.iconSize || config.table.icon.size.small">{{value.icon}}</i>
          <span *ngIf="!value.action">{{value.value}}</span>
          <a class="link link--bold" *ngIf="value.action" (click)="tableActions['value.action']">{{value.value}}</a>
        </div>
      </ng-template>
    </ngx-datatable-column>

  </ngx-datatable>
</div>